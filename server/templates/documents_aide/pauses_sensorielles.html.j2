{% extends 'documents_aide/base_doc.html.j2' %}
{% block body %}
<section class="doc-section">
  <p>Structurer des pauses sensorielles permet à {{ pron('il', 'elle', 'iel') }} de prévenir la surcharge et de revenir à une zone de confort corporelle.</p>
  <p>{{ T('Tu peux', 'Vous pouvez') }} ritualiser de courtes pauses pour {{ t('te recentrer', 'vous recentrer') }}.</p>
</section>
<section class="doc-section">
  <h2>Mini-rituels</h2>
  <table class="planning">
    <thead>
      <tr>
        <th>Rituel</th>
        <th>Durée</th>
        <th>Fréquence</th>
        <th>Matériel / aide</th>
      </tr>
    </thead>
    <tbody>
      {% for idx in range(1,4) %}
      <tr>
        <td>{{ inputs.get('rituel_' ~ idx) or context.pauses.rituels[idx-1].titre if context.pauses.rituels|length >= idx else '' }}</td>
        <td>{{ inputs.get('duree_' ~ idx) or context.pauses.rituels[idx-1].duree if context.pauses.rituels|length >= idx else '' }}</td>
        <td>{{ inputs.get('frequence_' ~ idx) or context.pauses.rituels[idx-1].frequence if context.pauses.rituels|length >= idx else '' }}</td>
        <td>{{ inputs.get('materiel_' ~ idx) or context.pauses.rituels[idx-1].materiel if context.pauses.rituels|length >= idx else '' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
<section class="doc-section">
  <h2>Checklist sensorielle</h2>
  <ul class="checklist">
    {% set options = [
      ("Silence / bruit blanc", inputs.get('opt_silence', False) or context.pauses.options.silence),
      ("Lumière douce", inputs.get('opt_lumiere', False) or context.pauses.options.lumiere),
      ("Contact profond / étirements", inputs.get('opt_contact', False) or context.pauses.options.contact),
      ("Soutien proprioceptif (poids, gilet)", inputs.get('opt_proprio', False) or context.pauses.options.proprio),
      ("Odeur ancrage", inputs.get('opt_odeur', False) or context.pauses.options.odeur),
      ("Mouvement rythmé", inputs.get('opt_mouvement', False) or context.pauses.options.mouvement)
    ] %}
    {% for label, checked in options %}
    <li>
      <svg viewBox="0 0 20 20">
        <rect x="1" y="1" width="18" height="18" rx="4" fill="none" stroke="currentColor" stroke-width="1.5" />
        {% if checked %}
        <polyline points="4,11 8,15 16,5" fill="none" stroke="currentColor" stroke-width="2" />
        {% endif %}
      </svg>
      <span>{{ label }}</span>
    </li>
    {% endfor %}
  </ul>
</section>
<section class="doc-section">
  <h2>Trousse sensorielle</h2>
  <p>Objets ou supports qui aident à {{ t('te réguler', 'vous réguler') }} rapidement.</p>
  <div class="notes-block">{{ inputs.get('trousse') or context.pauses.trousse or '' }}</div>
</section>
<section class="doc-section">
  <h2>Rappel</h2>
  <p>{{ T('Tu peux', 'Vous pouvez') }} planifier ces pauses dans {{ ton('ton agenda', 'votre agenda') }} et informer ton entourage pour qu'elles soient respectées.</p>
</section>
{% endblock %}
